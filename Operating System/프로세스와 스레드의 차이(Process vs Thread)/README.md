# 프로세스와 스레드의 차이 (Process vs Thread)

프로세스와 스레드의 차이를 제대로 이해하기 위해서는 프로그램과 프로세스, 프로세스와 스레드 사이에서 일어나는 동작 방식을 알아야 한다.

<br>

## 💡 프로그램이란?

- 어떤 작업을 하기 위해 실행할 수 있는 파일 또는 프로그램
- 파일이 저장 장치에 저장되어 있지만, 메모리에는 올라가 있지 않은 정적인 상태

- - -

## 💡 프로세스란?

- 메모리에 올라와 실행되고 있는 프로그램의 인스턴스
  - 운영체제로부터 시스템 자원을 할당받은 작업 단위

> 프로그램은 실행 파일을 의미하고, 그 프로그램을 실행한 게 프로세스라고 이해하면 됨

<br>

### 특징

![process](https://user-images.githubusercontent.com/78442839/226110389-eafade17-87b2-4bf6-87c5-eb2992286a67.png)

- 프로세스마다 각각 독립된 메모리 영역 (Code / Data / Stack / Heap 의 구조)을 할당함
  - Stack, Heap 영역은 동적 영역임
- 각 프로세스에 독립된 메모리 영역을 할당해 주기 때문에 프로세스는 다른 프로세스의 메모리에 접근할 수 없음
- 프로세스 간 자원을 공유하려면 프로세스 간의 통신 (IPC, LPC 등)을 사용해야 함
  - Ex.) 파이프, 파일, 소켓 등을 이용한 통신 방법

#### 할당받는 시스템 자원의 예

- CPU 시간
- 운영되기 위해 필요한 주소 공간
- Code, Data, Stack, Heap 의 구조로 되어 있는 독립된 메모리 영역

<br>
<details>
<summary>⚡️ 프로세스의 구조</summary>

- `Code 영역` 
  - 프로그래머가 작성한 프로그램의 코드
- `Data 영역` 
  - 코드가 실행되면서 사용한 변수나 파일들의 각종 데이터 
    - Ex.) 전역변수, 정적변수, 배열 등
- `Stack 영역`
  - 호출한 함수가 종료되면 되돌아올 메모리의 주소를 스택에 저장
  - 임시 메모리 영역
    - Ex.) 지역변수, 매개변수, 리턴 값 등
- `Heap 영역` 
  - 동적으로 할당되는 데이터들을 위해 존재
    - new(), malloc() 등
</details>

- - -

## 💡 스레드란?

- 프로세스 내에서 프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위

> 코드에 비유하자면, 스레드는 코드 내에 선언된 함수들을 의미함

<br>

### 특징

![thread](https://user-images.githubusercontent.com/78442839/226111035-d92883a8-8da5-4bcb-a3ba-8cb689131827.png)
![images_raejoonee_post_b91490ed-c67b-407d-8fea-a8d6fdb22559_104](https://user-images.githubusercontent.com/78442839/226112726-dc66cdef-468f-4641-8ca5-095713db1d8f.png)

- 하나의 프로세스는 하나 이상의 스레드 (메인 스레드)를 가짐
- 스레드는 프로세스 내에서 각각 Stack 만 따로 할당받고 Code, Data, Heap 영역은 공유함
  - 프로세스와 달리 스레드 간 메모리 (Heap 영역)를 공유하며 작동
- 한 스레드가 프로세스 자원을 변경하면, 다른 스레드 (Sibling Thread)도 변경 결과를 즉시 볼 수 있음
- 어떤 스레드 하나에서 오류가 발생할 경우, 같은 프로세스 내의 다른 스레드가 모두 종료됨

- - -

## 🔥 결론

- 프로세스는 프로그램을 실행해 운영체제로부터 자원을 할당받은 작업 단위를 말함
- 스레드는 프로세스 내에서 실행되는 흐름 단위를 말함

<br>

- 운영체제는 프로세스에게 Code / Data/ Stack / Heap 메모리 영역을 할당해 주고 최소 작업 단위로 삼으며, 프로세스 간 자원을 공유할 수 없음
- 스레드는 프로세스 내에서 Stack 메모리 영역을 제외한 다른 메모리 영역을 다른 스레드와 공유할 수 있음

<br>

> 👉 참고<br>
> [위키백과 : 프로세스](https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4) <br>
> [[OS] 프로세스와 스레드의 차이](https://gmlwjd9405.github.io/2018/09/14/process-vs-thread.html) <br>
> [프로세스 vs 쓰레드 차이 정리](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4) <br>
> [프로세스와 스레드의 차이](https://brunch.co.kr/@kd4/3)